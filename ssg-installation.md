# Getting started with static site generators using Eleventy

## Installation
1. Open VS Code and type the following commands in your terminal:

    - Note: You can also use Git Bash (if on Windows) or the Terminal app (if on MacOS). From here on out, I'm going to write "terminal," and you can understand that to mean "the terminal inside of VS Code."

    1. `node -v`
    1. `npm -v`

---

  ### Missing either of these things?
  1. Install [node](https://nodejs.org/en/)
  1. After you complete the installation, run the commands above again to verify your installation was successful üôåüèª

---

2. Open VS Code and your GD431 project
1. Check what branch you're on; you should be on your project branch and your working directory should be clean.
    - If not, take a moment now to commit your changes and push your changes to GitHub.
1. Since installing new software is a bit of a major change, let's create a new branch based on your current redesign branch. When we've successfully finished the installation, we can then merge this back into your working branch.
    - `git branch use-eleventy` will create the new branch
    - `git checkout use-eleventy` will set you up to use that branch
1. In the terminal, you should be in your repo folder for GD431; we need to navigate to the subfolder for your redesign project. Do this by typing the following command: `cd redesign` where *`redesign`* is the name of your project folder.
    - `cd` stands for "change directory," which is what we've done üëçüèª 
    - if you now enter the command `pwd` (which stands for "present working directory"), you should see that you are inside of the directory for your redesign project (from now on, I'll simply call this your project directory)
1. Type `npm init -y` in your terminal
    - This will create a default `package.json` file for your project.
    - You can take a minute to open this new file and check it out; you can learn more about the settings of this file in the [npm docs](https://docs.npmjs.com/files/package.json)
1. Type `npm install --save-dev @11ty/eleventy` in your terminal; this will do the following:
    - Install the static site generator [Eleventy](https://www.11ty.io/)
    - Add Eleventy to your `package.json`; this communicates that this Eleventy is required to run your build your site. Note that is only required by the developer or anyone who wants to modify the site -- this requirement is not true or passed on to folks who view your site in the browser.
    - Creates `package-lock.json` and documents all of Eleventy's dependencies. These are the other tools and services Eleventy depends on to do its thing. As before, feel free to browse this file, but you should not modify or change it as it's automatically generated and updated.
    - Creates the `node_modules` directory for all those dependencies
1. Make a commit for the installation of Eleventy
    - **IMPORTANT NOTE:** You should **_not_** commit your `node_modules` directory or the files inside of it to GitHub.
    - If you see these files in your  "changes" section of the source control sidebar in VS Code, you should create a new file in your project directory; the filename should be `.gitignore` and, in that file, you should write `node_modules` and save the file ([sample .gitignore](https://gist.github.com/angeliquejw/28d9d1b8c7560644e65c8f77665697ea)).
    - This file tells git which things you do not want under source control, like the `node_modules` directory. üëçüèª
1. You may have noticed that NPM complained that your `package.json` didn't include a description or repo. You can choose to update `package.json` and include those things to get rid of those warnings.
    - Make sure you read the docs, though, so you properly format this info!
    - Make a commit of this change, if you do it

## üôåüèªüôåüèªüåà You've installed Eleventy üåàüôåüèªüôåüèª

Now, let's use the darn thing.

1. In your terminal, while inside your project directory, type `npx eleventy`.
    - This will run Eleventy.
    - You should see some logging in your terminal.
    - You should also see a newly created `_site` directory inside your project.
    - Eleventy has taken any files it can process, processed them and turned them into HTML. If you only had a basic HTML file to start with, as we did, this was not so impressive -- but we can build on this now that Eleventy is around to do its thing.
    - Like the CSS file created from your Sass files or the `package-lock.json` created earlier, the `_site` directory is autogenerated. You should **_not_** modify the code in this directory
1. `npx eleventy` runs Eleventy once, which is helpful when you want to just build your site. When you're actively working on the site, however, we've gotten used to using LiveServer and want to be able to have something similar.
1. In the terminal, run the following command: `npx eleventy --serve`
    - You should see some logging output and a link to `http://localhost:8081/`
    - Click this link to view your site.
    - Cool beans üòé
1. That's good, but that's kind of a long command to remember, nah? Let's improve things.
1. In the terminal, type `control`+`c` to stop the Eleventy server.
1. Open `package.json` and find the section titled "scripts." Replace that with this:
```
  "scripts": {
    "start": "eleventy --serve --watch",
    "build": "eleventy"
  },
```
7. Save the file.
1. In your terminal, enter the following command: `npm start` -- this should now have the same effect as `npx eleventy --serve`  üôåüèª
1. Press `ctrl`+`c` to stop your Eleventy server again. Let's continue to tweak our configuration.
1. Delete the `_site` folder. (You don't have to stress about this since it's autogenerated.)
1. In your project directory, create a new directory titled `src`.
1. Move the following files for your redesign project inside that directory:
    - `index.html` for your redesigned homepage
    - the `styles` directory
    - the `images` directory
    - the `js` directory
    - if you haven't created any of these directories, do so now inside `src`
1. What we've done now is isolate the files you're working on that are actually part of the web site -- everything else, like `package.json` are about how you are making the site, but they aren't directly related to things the user will see or experience in the browser.
1. Create a commit for moving these files.
1. In your project directory, create a file called `.eleventy.js` -- note the period that starts the file name!
    - One of the things that's great about Eleventy, per its marketing, is that it's zero-config -- it works just pretty much out of the box, and we've seen that.
    - However, we're going to create a config file to have more control over our results.
1. Now we need to tell Eleventy where to find your web site files and where to create the compiled files.
1. Open `.eleventy.js` and add the following:
```
module.exports = {
  dir: {
    input: "src",
    output: "dist"
  },
  htmlTemplateEngine: "njk",
  templateFormats: ["html", "njk", "css", "js", "jpg", "png", "svg"]
};
```

- This sets the input and output directories and tells Eleventy what types of files to care about.
    - You already know about HTML.
    - NJK stands for Nunjucks and is a file type we'll use when creating partials (which is also why we set it as the template engine).
    - The others -- CSS, JS, JPG, PNG, SVG -- aren't actually compiled by Eleventy, but they are file types we want Eleventy to copy to the new `dist` file the next time we build the site. You can learn more about this via the [pass-through copy docs](https://www.11ty.io/docs/copy/).
    - Reminder: I said above that Eleventy doesn't really care about your Sass; you'll still need to use the "Watch Sass" extension we installed in VS Code.

17. Let's verify everything works; type `npm run build` to get your project rebuilt with this new structure; you should now see a `dist` folder with your HTML and CSS.
1. Create a commit of the changes to date.
1. As we've successfully gotten Eleventy up and running, let's merge things in from this branch and get back onto your main redesign branch.
1. Push your new branch up to GitHub: `git push -u origin use-eleventy`
1. Go to GitHub and create a PR from this new branch. [Change the base branch](https://help.github.com/articles/creating-a-pull-request/#changing-the-branch-range-and-destination-repository) for this PR to be your redesign project branch **_not_** master.
1. Look over the changed files and, if everything looks good, merge the changes (again, make sure your base branch for this is not master!).
1. Back in VS Code, switch to your redesign branch and, in the terminal, run the `git pull` command. Everything should now be up to date and you should be using Eleventy in your main redesign branch. üôåüèª

### Creating partials

1. In the terminal, make sure you're in your project directory and start up Eleventy with `npm start`.
1. In your project directory, create a new folder inside `src` titled `_includes` -- remember the underscore.
1. Inside that folder, create a file titled `header.html`.
1. Add the following to that file:
`<h1>The header partial!</h1>`
1. Open the `index.html` in your `src` folder.
1. Under the opening `body` tag, add the following: `{% include "header.html" %}`
1. In your browser window, you should now see "The header partial!" at the top of your document.
1. As we've written this, we've used our first bit of the [Nunjucks templating language](https://mozilla.github.io/nunjucks/) -- the [include](https://mozilla.github.io/nunjucks/templating.html#include) statement is from Nunjucks. Eleventy is able to parse and handle Nunjucks templating language and, from it, create a compiled static HTML file. You can see this in action if you look a the `index.html` inside your `dist` directory.
1. So, **partials** are ways to reuse bits of HTML in multiple HTML files. They are inserted or injected into existing HTML.
1. Another templating concept is **layouts** -- these are bits of HTML that you wrap around your content. Let's make one of those.
1. Inside your `src/_includes` directory, create a new directory titled `layouts`.
1. Inside `layouts`, create a new file: `default.njk`
1. Open the `index.html` inside your `src` directory. Copy everything up to and including the opening `body` tag from `index.html` to the new `default.njk` file. Then copy the closing `body` and `html` tags and paste those into `default.njk` too.
1. In the `default.njk` file, between the two `body` tags, add the following: `{{ content | safe }}`
1. In the `default.njk` file, replace the content for the `title` tag with the following: `{{ title }}`. Save `default.njk`.
1. Now, we've created a default layout that all our future HTML files can use, but we still have to tell those files (like `index.html`) to use the layout. Open the `index.html` in your `src` directory.
1. At the top of the file, add the following:
```
---
layout: layouts/default.njk
title: Did it work?
---
```

- The bit between the dashes is called "[front matter](https://www.11ty.io/docs/data-frontmatter/)." It passes some info between your page and your layout, like the title.
18. You should see the title in your browser tab (you may need to reload in this instance).

You can now continue customizing your project by:
- updating the `title` in your `index.html` front matter to be something more appropriate for your project.
- creating additional partials
    - Note that you _can_ have partials inside of partials, if that helps you
- reading up more about ways you can use [Nunjucks](https://mozilla.github.io/nunjucks/templating.html):
    - [Four Killer Features of Nunjucks](https://css-tricks.com/killer-features-of-nunjucks/)
    - [Building A Static Site With Components Using Nunjucks](https://www.smashingmagazine.com/2018/03/static-site-with-nunjucks/)



---

## Troubleshooting
* If you see an error like this:
```
npm ERR! enoent ENOENT: no such file or directory, open '/gd431/package.json'

npm ERR! enoent This is related to npm not being able to find a file.
```
This just means you've accidentally tried to run a command in your main repo directory. `cd` into your redesign project directory and rerun the command.
